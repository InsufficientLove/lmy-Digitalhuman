# 缓存目录统一解决方案

## 已完成的修改

1. docker-compose.yml - 添加统一的持久化缓存目录挂载
2. C#端配置文件 - 添加TemplateCache配置
3. DigitalHumanTemplateService.cs - 使用统一缓存目录
4. OptimizedMuseTalkService.cs - 使用统一缓存目录
5. TemplatePreprocessService.cs - 使用统一缓存目录
6. template_manager.py - 使用环境变量配置缓存目录

## 需要手动完成

请手动修改以下Python文件，使用环境变量 MUSE_TEMPLATE_CACHE_DIR:
- global_musetalk_service.py
- ultra_fast_realtime_inference_v2.py
- direct_launcher.py

## 部署步骤

1. 在宿主机创建缓存目录: sudo mkdir -p /opt/musetalk/template_cache
2. 重新构建镜像: docker-compose build --no-cache
3. 启动服务: docker-compose up -d

缓存目录现在统一为: /opt/musetalk/template_cache

