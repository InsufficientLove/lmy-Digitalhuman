@echo off
chcp 65001 > nul
color 0B
title æ•°å­—äººç³»ç»Ÿ - å¼€å‘è¯ä¹¦ä¿¡ä»»å·¥å…·

echo ================================================================================
echo                          æ•°å­—äººç³»ç»Ÿ - å¼€å‘è¯ä¹¦ä¿¡ä»»å·¥å…·
echo ================================================================================
echo.
echo æ­¤å·¥å…·å°†å¸®åŠ©æ‚¨è§£å†³ HTTPS å¼€å‘çŽ¯å¢ƒçš„è¯ä¹¦ä¿¡ä»»é—®é¢˜
echo.
echo ðŸ”§ å³å°†æ‰§è¡Œçš„æ“ä½œï¼š
echo   1. æ¸…ç†çŽ°æœ‰çš„å¼€å‘è¯ä¹¦
echo   2. ç”Ÿæˆæ–°çš„å—ä¿¡ä»»å¼€å‘è¯ä¹¦
echo   3. è§£å†³ ERR_HTTP2_INADEQUATE_TRANSPORT_SECURITY é”™è¯¯
echo.
pause

echo ================================================================================
echo [æ­¥éª¤ 1/2] æ¸…ç†çŽ°æœ‰å¼€å‘è¯ä¹¦
echo ================================================================================

echo [ä¿¡æ¯] æ­£åœ¨æ¸…ç†çŽ°æœ‰è¯ä¹¦...
dotnet dev-certs https --clean
if %errorlevel% neq 0 (
    echo [è­¦å‘Š] æ¸…ç†è¯ä¹¦æ—¶é‡åˆ°é—®é¢˜ï¼Œç»§ç»­æ‰§è¡Œ...
)

echo ================================================================================
echo [æ­¥éª¤ 2/2] ç”Ÿæˆå¹¶ä¿¡ä»»æ–°è¯ä¹¦
echo ================================================================================

echo [ä¿¡æ¯] æ­£åœ¨ç”Ÿæˆæ–°çš„å¼€å‘è¯ä¹¦...
dotnet dev-certs https --trust
if %errorlevel% neq 0 (
    echo [é”™è¯¯] è¯ä¹¦ç”Ÿæˆå¤±è´¥
    echo.
    echo è¯·å°è¯•ä»¥ç®¡ç†å‘˜èº«ä»½è¿è¡Œæ­¤è„šæœ¬
    pause
    goto end
) else (
    echo [âœ“] å¼€å‘è¯ä¹¦ç”Ÿæˆå¹¶ä¿¡ä»»æˆåŠŸ
)

echo ================================================================================
echo                                è¯ä¹¦é…ç½®å®Œæˆ
echo ================================================================================
echo.
echo [âœ“] å¼€å‘è¯ä¹¦é…ç½®æˆåŠŸï¼
echo.
echo ðŸš€ çŽ°åœ¨æ‚¨å¯ä»¥ï¼š
echo.
echo   1. é‡æ–°å¯åŠ¨ Visual Studio 2022
echo   2. é‡æ–°è¿è¡Œé¡¹ç›®
echo   3. è®¿é—® https://localhost:7001/digital-human-test.html
echo.
echo ðŸ’¡ å¦‚æžœä»æœ‰é—®é¢˜ï¼Œè¯·å°è¯•ï¼š
echo   - é‡å¯æµè§ˆå™¨
echo   - æ¸…é™¤æµè§ˆå™¨ç¼“å­˜
echo   - ä½¿ç”¨æ— ç—•/éšç§æ¨¡å¼
echo.

:end
echo æŒ‰ä»»æ„é”®é€€å‡º...
pause >nul