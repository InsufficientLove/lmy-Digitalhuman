@echo off
chcp 65001 >nul
echo ================================================================================
echo              ðŸ—‘ï¸ æ¸…ç†æŸåçš„Qwenæ¨¡åž‹æ–‡ä»¶
echo ================================================================================
echo.
echo [âš ï¸] æ£€æµ‹åˆ°Qwenæ¨¡åž‹ä¸‹è½½ä¸å®Œæ•´:
echo   - å½“å‰å¤§å°: 23MB (åº”è¯¥28GB+)
echo   - Git LFSé—®é¢˜å¯¼è‡´åªä¸‹è½½äº†å…ƒæ•°æ®
echo   - å ç”¨ç£ç›˜ç©ºé—´ä½†æ— æ³•ä½¿ç”¨
echo.
echo [ðŸ’¡] å»ºè®®æ”¹ç”¨Ollamaç®¡ç†æ¨¡åž‹:
echo   âœ… è‡ªåŠ¨ä¸‹è½½å’Œç®¡ç†
echo   âœ… ä¼˜åŒ–æŽ¨ç†æ€§èƒ½  
echo   âœ… æ— Git LFSé—®é¢˜
echo   âœ… é‡åŒ–æ¨¡åž‹èŠ‚çœç©ºé—´
echo.
pause

echo ================================================================================
echo [æ­¥éª¤ 1/2] æ¸…ç†æŸåçš„æ–‡ä»¶
echo ================================================================================

if exist "models\llm\Qwen2.5-14B-Instruct" (
    echo [ðŸ”] æ£€æŸ¥å½“å‰Qwenç›®å½•:
    cd models\llm\Qwen2.5-14B-Instruct
    
    echo [ðŸ“Š] å½“å‰æ–‡ä»¶ç»Ÿè®¡:
    for /f "tokens=1,3" %%a in ('dir /s /-c ^| find "ä¸ªæ–‡ä»¶"') do (
        echo   - æ–‡ä»¶æ•°é‡: %%a ä¸ª
        echo   - æ€»å¤§å°: %%b å­—èŠ‚
    )
    
    cd ..\..\..
    
    echo.
    echo [â“] æ˜¯å¦åˆ é™¤æŸåçš„Qwenç›®å½•?
    echo [Y] æ˜¯ - åˆ é™¤å¹¶é‡Šæ”¾ç©ºé—´
    echo [N] å¦ - ä¿ç•™çŽ°æœ‰æ–‡ä»¶
    echo.
    
    set /p delete_choice="è¯·é€‰æ‹© (Y/N): "
    
    if /i "%delete_choice%"=="Y" (
        echo [ðŸ—‘ï¸] æ­£åœ¨åˆ é™¤æŸåçš„Qwenç›®å½•...
        rmdir /s /q "models\llm\Qwen2.5-14B-Instruct"
        
        if not exist "models\llm\Qwen2.5-14B-Instruct" (
            echo [âœ…] æ¸…ç†å®Œæˆ
        ) else (
            echo [âŒ] æ¸…ç†å¤±è´¥ï¼Œå¯èƒ½æœ‰æ–‡ä»¶è¢«å ç”¨
        )
    ) else (
        echo [â„¹ï¸] ä¿ç•™çŽ°æœ‰æ–‡ä»¶
    )
) else (
    echo [â„¹ï¸] æ²¡æœ‰æ‰¾åˆ°Qwenç›®å½•ï¼Œæ— éœ€æ¸…ç†
)

echo.
echo ================================================================================
echo [æ­¥éª¤ 2/2] æŽ¨èä½¿ç”¨Ollama
echo ================================================================================

echo [ðŸ¦™] Ollama vs ç›´æŽ¥ä¸‹è½½å¯¹æ¯”:
echo.
echo [ç›´æŽ¥ä¸‹è½½HuggingFaceæ¨¡åž‹]:
echo   âŒ éœ€è¦28GBå­˜å‚¨ç©ºé—´
echo   âŒ Git LFSä¸‹è½½é—®é¢˜é¢‘ç¹
echo   âŒ éœ€è¦æ‰‹åŠ¨ç®¡ç†æ¨¡åž‹æ–‡ä»¶
echo   âŒ æŽ¨ç†æ€§èƒ½æœªä¼˜åŒ–
echo   âŒ æ˜¾å­˜å ç”¨å¤§
echo.
echo [ä½¿ç”¨Ollama]:
echo   âœ… è‡ªåŠ¨ä¸‹è½½å’Œç®¡ç† (~8GBé‡åŒ–ç‰ˆæœ¬)
echo   âœ… ä¼˜åŒ–çš„æŽ¨ç†å¼•æ“Ž
echo   âœ… æ”¯æŒæµå¼å“åº”
echo   âœ… æ— Git LFSé—®é¢˜
echo   âœ… å¯åŠ¨é€Ÿåº¦å¿«
echo   âœ… æ˜¾å­˜å ç”¨å°‘
echo.

echo [ðŸš€] æŽ¨èæ“ä½œ:
echo   1. è¿è¡Œ setup-ollama-qwen.bat
echo   2. é€‰æ‹© qwen2.5:14b-instruct-q4_0 (é‡åŒ–ç‰ˆæœ¬)
echo   3. äº«å—ç¨³å®šé«˜æ•ˆçš„AIæœåŠ¡
echo.

set /p ollama_choice="æ˜¯å¦çŽ°åœ¨è®¾ç½®Ollama? (Y/N): "

if /i "%ollama_choice%"=="Y" (
    echo [ðŸš€] å¯åŠ¨Ollamaè®¾ç½®...
    call setup-ollama-qwen.bat
) else (
    echo [â„¹ï¸] æ‚¨å¯ä»¥ç¨åŽè¿è¡Œ setup-ollama-qwen.bat
)

echo.
echo ================================================================================
echo                           æ¸…ç†å®Œæˆ
echo ================================================================================

echo [ðŸ“Š] æ¸…ç†ç»“æžœ:
if not exist "models\llm\Qwen2.5-14B-Instruct" (
    echo   âœ… æŸåçš„Qwenæ–‡ä»¶å·²æ¸…ç†
    echo   âœ… é‡Šæ”¾äº†ç£ç›˜ç©ºé—´
) else (
    echo   â„¹ï¸ Qwenæ–‡ä»¶ä¿ç•™
)

echo.
echo [ðŸ’¡] ä¸‹ä¸€æ­¥å»ºè®®:
echo   1. ä½¿ç”¨ setup-ollama-qwen.bat å®‰è£…Ollamaç‰ˆæœ¬
echo   2. ç»§ç»­ä¸‹è½½MuseTalkæ¨¡åž‹
echo   3. è¿è¡Œ deploy-production-now.bat éƒ¨ç½²ç³»ç»Ÿ
echo.

echo æŒ‰ä»»æ„é”®é€€å‡º...
pause >nul